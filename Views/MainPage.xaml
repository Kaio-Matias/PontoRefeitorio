<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodel="clr-namespace:PontoRefeitorio.ViewModels"
             xmlns:camera="clr-namespace:CommunityToolkit.Maui.Views;assembly=CommunityToolkit.Maui.Camera"
             x:DataType="viewmodel:MainPageViewModel"
             x:Class="PontoRefeitorio.Views.MainPage"
             Shell.NavBarIsVisible="False"
             BackgroundColor="white">

    <Grid RowDefinitions="Auto, *, Auto" Padding="20">

        <Label 
            Grid.Row="0"
            Text="Posicione o rosto"
            TextColor="Black"
            FontSize="24"
            FontAttributes="Bold"
            HorizontalOptions="Center"
            Margin="0,10,0,10"/>

        <Border 
            Grid.Row="1"    
            Stroke="#DE7913"
            StrokeThickness="4"
            BackgroundColor="#DE7913" 
            StrokeShape="RoundRectangle 20"
            VerticalOptions="FillAndExpand"
            HorizontalOptions="FillAndExpand"
            Padding="10">

            <Frame 
                Padding="0"
                CornerRadius="360" 
                IsClippedToBounds="True"
                BorderColor="Transparent"
                BackgroundColor="Gray"
                VerticalOptions="Center"
                HeightRequest="450">

                <camera:CameraView x:Name="cameraView" />

            </Frame>
        </Border>

       
        <VerticalStackLayout Grid.Row="2" Spacing="10" HorizontalOptions="Center" VerticalOptions="Center" Margin="0,20,0,40">
            <Button 
                Text="Registrar Ponto" 
                Command="{Binding RegistrarPontoCommand}" 
                IsEnabled="{Binding IsButtonEnabled}"
                BackgroundColor="#DE7913"
                TextColor="White"
                FontSize="18"
                CornerRadius="50"
                HeightRequest="60"
                WidthRequest="250"/>

            <!--  BOTÃƒO DE TESTE
            <Button 
                Text="Salvar Foto para Teste" 
                Command="{Binding SavePhotoCommand}" 
                IsEnabled="{Binding IsButtonEnabled}"
                BackgroundColor="#512BD4"
                TextColor="White"
                FontSize="16"
                CornerRadius="50"
                HeightRequest="50"
                WidthRequest="250"/> -->
            
        </VerticalStackLayout>
        


        <Grid 
            Grid.RowSpan="3"
            IsVisible="{Binding ShowResultOverlay}"
            BackgroundColor="#A0000000">
            <VerticalStackLayout 
                VerticalOptions="Center" 
                HorizontalOptions="Center"
                Spacing="20">

                <Border 
                    StrokeShape="RoundRectangle 100" 
                    StrokeThickness="0"
                    HeightRequest="300"
                    WidthRequest="200"
                    BackgroundColor="{Binding ResultBackgroundColor}">
                    <Image
                        Source="{Binding ColaboradorFoto}"
                        Aspect="AspectFill" />
                </Border>

                <Label 
                    Text="{Binding ResultMessage}"
                    FontSize="32"
                    FontAttributes="Bold"
                    TextColor="White"
                    HorizontalTextAlignment="Center"/>

                <Label 
                    Text="{Binding ColaboradorNome}"
                    FontSize="24"
                    TextColor="White"
                    HorizontalTextAlignment="Center"/>
            </VerticalStackLayout>
        </Grid>

    </Grid>
</ContentPage>